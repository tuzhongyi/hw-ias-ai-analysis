<div class="system-module-gps-task-manager root-router">
  <div class="system-module-gps-task-manager-head">
    <div class="system-module-gps-task-manager-head-filter">
      <div class="forms">
        <!-- <div class="form-item">
          <div class="form-item-text">用户分组</div>
          <div class="form-item-value text">
            <select [(ngModel)]="table.args.group">
              <option [ngValue]="undefined">全部</option>
              <option
                *ngFor="let item of source.groups"
                [ngValue]="item.GroupId"
              >
                {{ item.GroupName }}
              </option>
            </select>
          </div>
        </div> -->
        <div class="form-item">
          <div class="form-item-text">场景类型</div>
          <div class="form-item-value text">
            <select [(ngModel)]="table.args.type">
              <option [ngValue]="undefined">全部</option>
              <option *ngFor="let item of source.types" [ngValue]="item.Value">
                {{ item.Name }}
              </option>
            </select>
          </div>
        </div>
        <div class="form-item">
          <div class="form-item-text">任务名称</div>
          <div class="form-item-value text">
            <input type="text" [(ngModel)]="table.args.name" />
          </div>
        </div>
        <div class="form-item">
          <button class="button-clip-gradient" (click)="table.search()">
            查找
          </button>
        </div>
      </div>
    </div>
    <div class="button-group">
      <button
        class="button-clip-gradient"
        [disabled]="table.selecteds.length == 0"
        (click)="window.confirm.open(table.selecteds.length)"
      >
        删除
      </button>
      <button class="button-clip-gradient" (click)="window.details.open()">
        添加
      </button>
    </div>
  </div>
  <div class="system-module-gps-task-manager-body">
    <ias-system-module-gps-task-table
      [args]="table.args"
      [load]="table.load"
      [(selecteds)]="table.selecteds"
      (details)="table.on.details($event)"
      (picture)="window.picture.on.open($event)"
    ></ias-system-module-gps-task-table>
  </div>
  <ias-window
    [Model]="window.details"
    *ngIf="window.details.show"
    [style]="window.details.style"
    [title]="window.details.title"
  >
    <ias-system-module-gps-task-details-container
      [data]="window.details.data"
      (close)="window.details.show = false"
      (save)="on.details.save($event)"
      (draw)="on.draw.open($event)"
      [drawn]="on.draw.drawn"
      (videocaptureopen)="on.video.capture.open($event)"
      (videocaptureupload)="on.video.capture.upload($event)"
      [videocapturecompleted]="on.video.capture.completed"
      [locationchanged]="on.video.capture.location"
    ></ias-system-module-gps-task-details-container>
  </ias-window>
  <ias-window
    *ngIf="window.draw.show"
    [Model]="window.draw"
    [style]="window.draw.style"
    [title]="window.draw.title"
  >
    <ias-system-module-gps-task-picture-drawing
      [args]="window.draw.args"
      (save)="on.draw.save($event)"
      (close)="window.draw.show = false"
    ></ias-system-module-gps-task-picture-drawing>
  </ias-window>

  <ias-window
    *ngIf="window.video.capture.show"
    [Model]="window.video.capture"
    [style]="window.video.capture.style"
    [title]="window.video.capture.title"
  >
    <ias-system-module-gps-task-video-capture-manager
      [filename]="window.video.capture.filename"
      [data]="window.video.capture.data"
      (save)="on.video.capture.save($event)"
      (close)="window.video.capture.show = false"
    ></ias-system-module-gps-task-video-capture-manager>
  </ias-window>
  <ias-window
    *ngIf="window.picture.show"
    [Model]="window.picture"
    [style]="window.picture.style"
    [title]="window.picture.title"
  >
    <ias-picture-list
      [id]="window.picture.id"
      [polygon]="window.picture.polygon"
      [zoom]="false"
      [page]="window.picture.page"
      (pageChange)="window.picture.on.change($event)"
    ></ias-picture-list>
  </ias-window>
  <confirm-window
    *ngIf="window.confirm.show"
    [model]="window.confirm"
    [content]="window.confirm.content"
    (ok)="on.delete()"
    (cancel)="window.confirm.show = false"
  >
  </confirm-window>
</div>
